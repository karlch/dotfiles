#!/bin/sh

i3-msg floating enable

# Global variables
TITLE="USB devices"

# Populate list of devices
deviceNames=$(findmnt -Do TARGET | grep "/media" | tr " " "_" | sed \
"s/\/media\///" | tr "\n" " ")
deviceSources=$(findmnt -Do SOURCE | grep "sd[b-z]" | tr "\n" " " )
deviceCount=$(echo $deviceSources | wc -w)

# Start of program output
clear
echo $TITLE
echo ""
if [[ $deviceCount == 0 ]]; then
    echo "No devices"
fi

# Display list of devices
for ((device=1; device<=${deviceCount}; device+=1))
do
    curName=$(echo $deviceNames | cut -d " " -f${device})
    curSource=$(echo $deviceSources | cut -d " " -f${device})
    printf "%4s)   %-25s%-13s\n" ${device} ${curName} ${curSource}
done

# Leave 
read -p "Exit: " input
exit 0
